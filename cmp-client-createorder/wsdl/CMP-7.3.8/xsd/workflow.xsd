<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    $Id: //Source_Code/BCC/Dise3G/7.3/8/WebService/Schema/xsd/workflow.xsd#3 $
    $Header: //Source_Code/BCC/Dise3G/7.3/8/WebService/Schema/xsd/workflow.xsd#3 $
    $DateTime: 2021/04/15 12:14:31 $
    $Author: Eimear.Larkin $
    $File: //Source_Code/BCC/Dise3G/7.3/8/WebService/Schema/xsd/workflow.xsd $
    $Revision: #3 $
    (c) Copyright 2007 Martin Dawes Systems Ltd
-->

<!-- This schema describes data types used by the Workflow service. -->
<xs:schema targetNamespace="http://mdsuk.com/ws/dise3g/workflow/dto/business"
    xmlns:target="http://mdsuk.com/ws/dise3g/workflow/dto/business"
    xmlns:base="http://mdsuk.com/ws/dise3g/base"
    xmlns:address="http://mdsuk.com/ws/dise3g/address/dto/business"
    xmlns:services="http://mdsuk.com/ws/dise3g/services/dto/business"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:import namespace="http://mdsuk.com/ws/dise3g/base" schemaLocation="base.xsd"/>
    <xs:import namespace="http://mdsuk.com/ws/dise3g/address/dto/business"
        schemaLocation="address.xsd"/>
    <xs:import namespace="http://mdsuk.com/ws/dise3g/services/dto/business"
        schemaLocation="services.xsd"/>

    <xs:complexType name="WorkflowEventType">
        <xs:all>
            <xs:element name="TargetIdentifier" type="target:TargetIdentifierType" minOccurs="1"/>
            <xs:element name="EventTypeCode" type="target:EventTypeCodeType" minOccurs="1"/>
            <xs:element name="EventCode" type="target:EventCodeType" minOccurs="1"/>
            <xs:element name="ProcessCommand" type="target:ProcessCommandType" minOccurs="1"/>
            <xs:element name="ProcessDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ProcessBackDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ContactInformation" type="target:ContactInformationType" minOccurs="0"/>
            <xs:element name="TelephoneNumber" type="base:PhoneNumberType" minOccurs="0"/>
            <xs:element name="ResolutionRequiredByDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ReasonCode" type="target:ReasonCodeType" minOccurs="0"/>
            <xs:element name="PassToUserID" type="target:UserIDType" minOccurs="0"/>
            <xs:element name="IncludeNotesDefault" type="target:IncludeNotesDefaultType"
                minOccurs="0"/>
            <xs:element name="Notes" type="target:NotesType" minOccurs="0"/>
        </xs:all>
    </xs:complexType>

    <xs:complexType name="UpdateWorkflowEventType">
        <xs:all>
            <xs:element name="WorkflowNumber" type="target:WorkflowNumberType" minOccurs="1"/>
            <xs:element name="EventStatus" type="target:EventStatusType" minOccurs="0"/>
            <xs:element name="ProcessCommand" type="target:ProcessCommandType" minOccurs="1"/>
            <xs:element name="ProcessDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ProcessBackDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ContactInformation" type="target:ContactInformationType" minOccurs="0"/>
            <xs:element name="TelephoneNumber" type="base:PhoneNumberType" minOccurs="0"/>
            <xs:element name="ResolutionRequiredByDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ReasonCode" type="target:ReasonCodeType" minOccurs="0"/>
            <xs:element name="PassToUserID" type="target:UserIDType" minOccurs="0"/>
            <xs:element name="IncludeNotesDefault" type="target:IncludeNotesDefaultType"
                minOccurs="0"/>
            <xs:element name="Notes" type="target:NotesType" minOccurs="0"/>
            <xs:element name="BillImmediately" type="xs:boolean" minOccurs="0"/>
			<xs:element name="InvoiceConsolidationAgreement" type="base:AgreementNumberType" minOccurs="0"/>
        </xs:all>
    </xs:complexType>

    <xs:simpleType name="UserIDType">
        <xs:restriction base="xs:string"/>
    </xs:simpleType>

    <xs:complexType name="TargetIdentifierType">
        <xs:choice>
            <xs:element name="GroupIdentifier" type="base:GroupCodeType"/>
            <xs:element name="CorporateIdentifier" type="base:CorporateCodeType"/>
            <xs:element name="AccountIdentifier" type="base:AccountNumberType"/>
            <xs:element name="AgreementIdentifier" type="base:AgreementNumberType"/>
            <xs:element name="SubscriptionIdentifier" type="base:SubscriptionNumberType"/>
            <xs:element name="MobileNumber" type="base:NetworkSerialNumberType"/>
        </xs:choice>
    </xs:complexType>

    <xs:complexType name="QueryWorkflowsType">
        <xs:sequence>
            <xs:element name="Workflow" type="target:QueryWorkflowsItemResponseType" minOccurs="0"
                maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="QueryWorkflowsItemResponseType">
        <xs:sequence>
            <xs:element name="EventNumber" type="target:WorkflowNumberType"/>
            <xs:element name="EventStatus" type="target:WorkflowStatusType" minOccurs="0"/>
            <xs:element name="EventType" type="target:EventTypeCodeType"/>
            <xs:element name="EventCode" type="target:EventCodeType"/> 
            <xs:element name="AdjustmentAmount" type="base:SignedDecimal9_2Type" minOccurs="0"/>         
            <xs:element name="CurrentUserID" type="target:UserIDType" minOccurs="0"/>
            <xs:element name="CreatedDate" type="xs:dateTime"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
    	
	 <xs:complexType name="AdjustmentsType">
		<xs:sequence>
			<xs:element name="Adjustment" type="target:AdjustmentType" minOccurs="0" maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>
	 
	 <xs:complexType name="AdjustmentType">
        <xs:sequence>
			<xs:element name="LineNumber" type="base:FiveDigitNumberType"/>
			<xs:element name="ServiceCode" type="base:ServiceCodeType"/>
			<xs:element name="SubscriptionNumber" type="base:SubscriptionNumberType" minOccurs="0"/>
			<xs:element name="PrimarySerialNumber" type="base:NetworkSerialNumberType" minOccurs="0"/>
            <xs:element name="ChargeStartDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ChargeEndDate" type="xs:date" minOccurs="0"/>
            <xs:element name="NetAmount" type="base:SignedDecimal9_2Type"/>
            <xs:element name="ChargeToNominalCode" type="services:ChargetoNominalCodeType" minOccurs="0"/>
			<xs:element name="TaxRateAtStart" type="xs:boolean" minOccurs="0"/>
            <xs:element name="Comments" type="target:SalesLedgerAdjustmentCommentsType" minOccurs="0"/>
			<xs:element name="InvoiceNumber" type="base:EightDigitNumberType" minOccurs="0"/>
			<xs:element name="InvoiceLineNumber" type="base:SevenDigitNumberType" minOccurs="0"/>
			<xs:element name="InvoiceTaxDate" type="xs:date" minOccurs="0"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="DataFilterType">
        <xs:all>
            <xs:element name="EventTypeCode" type="target:EventTypeCodeType" minOccurs="0"/>
            <xs:element name="EventCode" type="target:EventCodeType" minOccurs="0"/>
            <xs:element name="ResolutionRequiredByDateOnOrBefore" type="xs:date" minOccurs="0"/>
        </xs:all>
    </xs:complexType>

    <xs:complexType name="QueryWorkflowDatasetsType">
        <xs:sequence>
            <xs:element name="Dataset" type="target:QueryWorkflowDatasetType" maxOccurs="unbounded"
            />
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="QueryWorkflowBasicType">
        <xs:sequence>
            <xs:element name="EventNumber" type="target:WorkflowNumberType"/>
            <xs:element name="CustomerLevel" type="target:CustomerLevelType"/>
            <xs:element name="CustomerLevelReference" type="target:CustomerLevelReferenceType"/>
            <xs:element name="EventStatus" type="target:WorkflowStatusType"/>           
            <xs:element name="EventType" type="target:EventCodeType"/>
            <xs:element name="EventCode" type="target:EventTypeCodeType"/>
            <xs:element name="DeliveryAddressNumber" type="address:AddressCodeType"/>
            <xs:element name="ReasonCode" type="target:ReasonCodeType" minOccurs="0"/>
            <xs:element name="CurrentUserId" type="target:UserIDType" minOccurs="0"/>
            <xs:element name="ResolutionData" type="target:QueryWorkflowResolutionType"/>            
            <xs:element name="CreatedDate" type="xs:dateTime"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType"/>
        </xs:sequence>
    </xs:complexType>
	
    <xs:complexType name="QueryWorkflowNotesType">
        <xs:sequence>
            <xs:element name="Notes" type="target:NotesType"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>	

    <xs:complexType name="QueryWorkflowResolutionType">
        <xs:sequence>
            <xs:element name="ResolvedByUserId" type="target:UserIDType" minOccurs="0"/>
            <xs:element name="ResolvedDate" type="xs:date" minOccurs="0"/>
            <xs:element name="ResolvedDateTime" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="ResolutionReqByDate" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="ProcessedDate" type="xs:date" minOccurs="0"/>
            <xs:element name="OverrideActionDate" type="xs:date" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="QueryWorkflowContactDetailsType">
        <xs:sequence>
            <xs:element name="ContactName" type="target:ContactInformationType" minOccurs="0"/>
            <xs:element name="ContactTelephoneNumber" type="base:PhoneNumberType" minOccurs="0"/>
            <xs:element name="ContactExtension" type="target:ContactInformationType" minOccurs="0"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
    
    <xs:complexType name="LinkedEventsType">
	  	<xs:sequence>
	    	<xs:element name="LinkedEvent" type="target:LinkedEventType" minOccurs="0" maxOccurs="unbounded" />
		  </xs:sequence>
	</xs:complexType>
	 
	<xs:complexType name="LinkedEventType">
	  	<xs:sequence>
		    <xs:element name="EventNumber" type="target:WorkflowNumberType" minOccurs="0" maxOccurs="1"/>
		    <xs:element name="SequenceNumber" type="base:ThreeDigitNumberType" minOccurs="1" maxOccurs="1"/>
		    <xs:element name="EventTypeCode" type="target:EventTypeCodeType" minOccurs="1" maxOccurs="1"/>
		    <xs:element name="EventCode" type="target:EventCodeType" minOccurs="1" maxOccurs="1"/>
		    <xs:element name="EventStatus" type="target:WorkflowStatusType" minOccurs="1" maxOccurs="1"/>
	  	</xs:sequence>
	 </xs:complexType>
    

    <xs:simpleType name="QueryWorkflowDatasetType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="BASIC"/>
            <xs:enumeration value="CONTACT_DETAILS"/>
            <xs:enumeration value="ADDRESS"/>
			<xs:enumeration value="NOTES"/>
			<xs:enumeration value="ADJUSTMENTS"/>
			<xs:enumeration value="LINKED_EVENTS"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="StatusFilterType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="ALL"/>
            <xs:enumeration value="OPEN"/>
            <xs:enumeration value="RESOLVED"/>
            <xs:enumeration value="CANCELLED"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="CustomerLevelType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Subscription"/>
            <xs:enumeration value="Account"/>
            <xs:enumeration value="Corporate"/>
            <xs:enumeration value="Group"/>
            <xs:enumeration value="Agreement"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="CustomerLevelReferenceType">
        <xs:restriction base="base:StringMaxLength8Type">
            <xs:whiteSpace value="collapse"/>
            <xs:pattern value="([a-zA-Z0-9_\-])+"/>
            <xs:minLength value="1"></xs:minLength>       
            <xs:maxLength value="8"></xs:maxLength>            
        </xs:restriction>        
    </xs:simpleType>

    <xs:simpleType name="WorkflowNumberType">
        <xs:restriction base="base:NineDigitNumberType"/>
    </xs:simpleType>

    <xs:simpleType name="EventCodeType">
        <xs:restriction base="base:StringMaxLength4Type"/>
    </xs:simpleType>

    <xs:simpleType name="EventTypeCodeType">
        <xs:restriction base="base:StringMaxLength4Type"/>
    </xs:simpleType>

    <xs:simpleType name="ReasonCodeType">
        <xs:restriction base="base:StringMaxLength4Type"/>
    </xs:simpleType>
	
    <xs:simpleType name="NotesType">
        <xs:restriction base="xs:string"/>
    </xs:simpleType>	

    <xs:simpleType name="ProcessCommandType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="SUPPRESS"/>
            <xs:enumeration value="YES"/>
            <xs:enumeration value="NO"/>
        </xs:restriction>
    </xs:simpleType>

    <xs:simpleType name="ContactInformationType">
        <xs:restriction base="xs:string"/>
    </xs:simpleType>

    <xs:simpleType name="IncludeNotesDefaultType">
        <xs:restriction base="xs:boolean"/>
    </xs:simpleType>

    <!-- EventStatusType corresponds to the progression type of a Workflow -->
    <xs:simpleType name="EventStatusType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="PROCESS"/>
            <xs:enumeration value="CANCEL"/>
            <xs:enumeration value="RESOLVE"/>
        </xs:restriction>
    </xs:simpleType>

    <!-- WorkflowStatusType corresponds to the EventStatus field stored on the DiaryEvent file-->
    <xs:simpleType name="WorkflowStatusType">
        <xs:restriction base="xs:string">
            <xs:enumeration value="Awaiting customer activation"/>
            <xs:enumeration value="Awaiting order despatch"/>
            <xs:enumeration value="Cancelled"/>
            <xs:enumeration value="Blank"/>
            <xs:enumeration value="Comment"/>
            <xs:enumeration value="Confirmation error"/>
            <xs:enumeration value="Pending auto confirmation"/>
            <xs:enumeration value="Pending auto processing"/>
            <xs:enumeration value="Processing error"/>
            <xs:enumeration value="Resolved"/>
            <xs:enumeration value="Unresolved/Open"/>
            <xs:enumeration value="Cancelled Link"/>
        	<xs:enumeration value="Pending Link"/>   
        </xs:restriction>
    </xs:simpleType>
    
    <xs:simpleType name="SalesLedgerAdjustmentCommentsType">
        <xs:restriction base="xs:string">
		    <xs:minLength value="1"></xs:minLength>       
            <xs:maxLength value="234"></xs:maxLength>
		</xs:restriction>
    </xs:simpleType>

		<xs:complexType name="WorklistType">
        <xs:sequence>     
			<xs:element name="Department" type="base:StringMaxLength6Type" minOccurs="1"/>
            <xs:element name="UserID" type="target:UserIDType" minOccurs="1"/>
			<xs:element name="OpenEvents" type="xs:integer" minOccurs="1"/>
			<xs:element name="OverdueEvents" type="xs:integer" minOccurs="1"/>	
        </xs:sequence>
    </xs:complexType>
	
	<xs:complexType name="WorklistsType">
        <xs:sequence>        
            <xs:element name="Worklist" type="target:WorklistType" minOccurs="0" maxOccurs="unbounded"/>	
        </xs:sequence>
    </xs:complexType>
	
	<xs:complexType name="WorklistItemType">
        <xs:sequence>
			<xs:element name="EventNumber" type="target:WorkflowNumberType"/>
            <xs:element name="TargetIdentifier" type="target:TargetIdentifierType" minOccurs="1"/>
            <xs:element name="EventType" type="target:EventTypeCodeType" minOccurs="1"/>
            <xs:element name="EventCode" type="target:EventCodeType" minOccurs="1"/>
			<xs:element name="EventStatus" type="target:WorkflowStatusType"/>     
			<xs:element name="CreatedByUserID" type="target:UserIDType" minOccurs="1"/>
			<xs:element name="CreatedDate" type="xs:dateTime"/>
			<xs:element name="PassedToUserID" type="target:UserIDType" minOccurs="0"/>
			<xs:element name="PassedToDate" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="ResolutionRequiredByDate" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="LastAmendedDate" type="base:LastAmendedDateType" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
	
	<xs:complexType name="WorklistItemsType">
        <xs:sequence>        
            <xs:element name="WorklistItem" type="target:WorklistItemType" minOccurs="0" maxOccurs="unbounded"/>	
        </xs:sequence>
    </xs:complexType>
	
</xs:schema>
